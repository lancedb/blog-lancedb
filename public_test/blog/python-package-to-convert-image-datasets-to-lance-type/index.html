<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Python Package to convert image datasets to lance type - LanceDB Blog</title><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/syntax-highlighting.css><script src=/js/toc-progress.js></script><script src=/js/heading-links.js></script><script src=/js/announcement.js></script><script src=/js/code-blocks.js></script></head><body><div class=announcement-bar id=announcement-bar><div class=announcement-content><span>June 1st, 2025: LanceDB Cloud is now in public beta!</span>
<a href=https://lancedb.com/cloud class=announcement-link>Try it now â†’</a>
<button class=announcement-close onclick=closeAnnouncement()>Ã—</button></div></div><header class=site-header><div class=header-content><a href=/ class=site-title><img src=/assets/blog/logo.png alt="LanceDB Blog" class=site-logo></a><div class=header-links><a href=/docs class=header-link>Documentation</a>
<a href=/pricing class=header-link>Pricing</a>
<a href=/get-started class="header-link get-started">Get Started</a></div></div></header><div class=content-wrapper><div class=toc-container><div class=toc><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#install-cli-sdk>Install CLI SDK</a><ul><li></li></ul></li></ul></nav></div></div><main><h1>Python Package to convert image datasets to lance type</h1><div class=post-meta><span class=post-author>Vipul Maheshwari</span>
<span class=meta-divider>â€¢</span>
<span class=post-date>December 9, 2024</span></div><article class=single-post><img src=/assets/blog/python-package-to-convert-image-datasets-to-lance-type/python-package-to-convert-image-datasets-to-lance-type.png alt="Python Package to convert image datasets to lance type" class=preview-image><div class=post-content><p>ðŸ’¡</p><p>This is community post by Vipul Maheshwari</p><p>A few months ago, I wrote two articles on how the Lance format can supercharge your machine-learning workflows. In the <a href=__GHOST_URL__/effortlessly-loading-and-processing-images-with-lance-a-code-walkthrough/>first</a>, I showed how Lance&rsquo;s columnar storage can make handling large image datasets much more efficient for ML workflows. Then, I followed up with a <a href=__GHOST_URL__/convert-any-image-dataset-to-lance/>guide</a> on converting datasets like <a href=https://www.kaggle.com/datasets/vipulmaheshwarii/cinic-10-lance-dataset>cinic</a> and <a href=https://www.kaggle.com/datasets/vipulmaheshwarii/mini-imagenet-lance-dataset>mini-imagenet</a> into Lance format using a custom Python script in <a href="https://colab.research.google.com/drive/12RjdHmp6m9_Lx7YMRiat4_fYWZ2g63gx?usp=sharing">Google Colab</a>. While that worked well, it was a bit manual.</p><p>Some of my friends are lazy but excited enough to run the Colab and use the Lance formatted datatype for some of their experiments. Being a good friend, I&rsquo;m excited to share a much easier solution: the <code>lancify</code> Python package.</p><p>It&rsquo;s literally just running one command and boomâ€”your image datasets are in Lance format, ready to go. And, just between us, it makes my life a lot easier, too.
<img src=__GHOST_URL__/content/images/2024/12/image-6.png alt></p><h5 id=installing-the-package>Installing the package</h5><p>Before diving into the conversion process, let&rsquo;s install the <code>lancify</code> package. You can easily install it via pip:</p><pre><code>pip install lancify
</code></pre><h4 id=converting-your-image-dataset-to-lance>Converting Your Image Dataset to Lance</h4><p>Once you&rsquo;ve installed the package, converting any image dataset to the Lance format is as simple as running the following Python code. The <code>lancify</code> package abstracts away the complexity of running the Colab notebooks manually;</p><pre><code>from lancify.converter import convert_dataset

# Define the path to your image dataset
image_dataset_path = 'cards-classification'
resize_dimensions = (256, 256)  # Example resize dimensions
splits = [&quot;train&quot;, &quot;test&quot;, &quot;valid&quot;]

convert_dataset(
    dataset_path=image_dataset_path,
    batch_size=10,  # You can adjust the batch size as needed
    resize=resize_dimensions,  # Pass resize dimensions if you want to resize images
    splits=splits
)
</code></pre><p>For this demonstration, I have used this <a href=https://www.kaggle.com/datasets/gpiosenka/cards-image-datasetclassification>dataset</a>, which provides flexibility in terms of image resizing and dataset splits. The image resizing is optional; by default, the images are processed with their original dimensions. However, if needed, you can specify a target size, such as 256x256, by passing the desired dimensions. If you prefer to keep the original size, simply pass <code>None</code> for the resize parameter. Regarding dataset splits, if the dataset includes predefined divisions like training, testing, and validation sets, you can pass a list specifying the relevant splits.</p><p>For <a href=https://www.kaggle.com/datasets/jehanbhathena/weather-dataset>datasets</a> that do not have predefined splits, the images are organized by classification labels. In such cases, you only need to provide the dataset path and a single lance file will be generated, containing all the images with their corresponding labels. This makes sure that the various kinds of image datasets are handled properly whether they include splits or not.</p><pre><code>from lancify.converter import convert_dataset

image_dataset_path = 'weather-classification-data'

convert_dataset(
    dataset_path=image_dataset_path,
    batch_size=10,  # You can adjust the batch size as needed
)
</code></pre><p>The <code>convert_dataset</code> function automatically handles the following:</p><ol><li><strong>Reading the image data</strong>: It reads image files and their metadata (filename, category, data split).</li><li><strong>Converting to Lance</strong>: The images are converted into the Lance format with the proper schema.</li><li><strong>Saving the Lance files</strong>: Lance files are saved for each dataset split (train, test, validation) if there are splits in the dataset, if not then a single Lance file is saved with the combined data with an adequate schema to segregate the data with the respective labels.</li></ol><p>This method is far more concise than manually iterating over directories, creating schemas, and writing to lance files as we did in the previous version using raw Google Colab.</p><h2 id=install-cli-sdk>Install CLI SDK</h2><p>In addition to using the <code>lancify</code> package programmatically through the imported function, you can also leverage the CLI SDK to convert your image datasets. The SDK offers a CLI for the <code>lancify</code>.</p><p>To use the CLI, all you need to do is install the package with <code>pip install lancify</code> and then run the <code>lancify</code> command in your terminal and follow the args.</p><p>This is how it looks :
<img src=__GHOST_URL__/content/images/2024/12/image-2.png alt>CLI usage for lancify</p><h4 id=whats-happening-behind-the-scenes>What&rsquo;s happening behind the scenes?</h4><p>To give you a better understanding, here&rsquo;s a brief overview of what happens when you use <code>lancify</code></p><ul><li><strong>Image Data</strong>: The package reads images from your dataset directory and converts them into a binary format.</li><li><strong>Metadata Extraction</strong>: Metadata such as the image&rsquo;s filename, category (label), and data split (train/test/validation) are automatically extracted.</li><li><strong>PyArrow RecordBatch</strong>: The image data and metadata are packaged into a PyArrow <code>RecordBatch</code> for efficient columnar storage.</li><li><strong>Lance Dataset Creation</strong>: These <code>RecordBatch</code> objects are then written to Lance datasets optimized for performance and storage.</li></ul><p>This process mirrors the manual steps we previously took but in a much more user-friendly manner, significantly reducing the boilerplate code that was necessary before when you had to manually handle the <a href="https://colab.research.google.com/drive/12RjdHmp6m9_Lx7YMRiat4_fYWZ2g63gx?usp=sharing#scrollTo=93qlCg6TpcW-">colab</a>.</p><p>[</p><p>Google Colab</p><p><img src=__GHOST_URL__/content/images/icon/favicon-14.ico alt></p><p><img src=__GHOST_URL__/content/images/thumbnail/colab_favicon_256px-14.png alt>
](<a href="https://colab.research.google.com/drive/12RjdHmp6m9_Lx7YMRiat4_fYWZ2g63gx?usp=sharing#scrollTo=93qlCg6TpcW-">https://colab.research.google.com/drive/12RjdHmp6m9_Lx7YMRiat4_fYWZ2g63gx?usp=sharing#scrollTo=93qlCg6TpcW-</a>)</p><h4 id=loading-your-dataset-into-pandas>Loading your dataset into pandas</h4><p>Once your image dataset has been converted into the lance format, you can seamlessly load it into Pandas data frames to do all kinds of stuff. Here&rsquo;s how to do it for the <code>card-classification</code> training lance file.</p><pre><code>import lance
import pandas as pd

# Load Lance dataset
ds = lance.dataset('cards-classification/cards-classification_train.lance')
table = ds.to_table()

# Convert Lance table to Pandas dataframe
df = table.to_pandas()
print(df.head())
</code></pre><p><img src=__GHOST_URL__/content/images/2024/12/image-3.png alt>
This is a simple and efficient way to convert your image datasets to the lance format using the <code>lancify</code> package and it integrates smoothly into your deep-learning projects.</p><p>Switching to the Lance format speeds up and improves your data pipelines, especially when handling large image datasets. Install the package and run a simple script to convert your datasetsâ€”it&rsquo;s easy and straightforward.
<img src=__GHOST_URL__/content/images/2024/12/image-5.png alt>
Just this small change can really speed up your machine learning workflowsâ€”data loading and processing become much quicker, which means your models train faster. If you need a reference, this is a <a href=https://vipul-maheshwari.github.io/2024/06/26/train-a-cnn-with-lancedataset>quickie</a> on how to use the lance formatted image datasets for training your deep learning models. And if you&rsquo;re looking for more ideas, there are plenty of other <a href=https://github.com/lancedb/lance-deeplearning-recipes>deep-learning recipes</a> built on Lance.</p><p>Trust me, it&rsquo;s worth it! ðŸ¤—</p></div></article><div class=author-section><img src=/assets/authors/default-avatar.png alt="Vipul Maheshwari" class=author-avatar><div class=author-info><h3 class=author-name>Vipul Maheshwari</h3><div class=author-social></div></div></div><div class=related-posts><h2>Related Posts</h2><div class=related-posts-grid><article class=related-post><a href=/blog/columnar-file-readers-in-depth-repetition-definition-levels/><img src=/assets/blog/columnar-file-readers-in-depth-repetition-definition-levels/columnar-file-readers-in-depth-repetition-definition-levels.png alt="Columnar File Readers in Depth: Repetition & Definition Levels" class=related-preview-image></a><h3><a href=/blog/columnar-file-readers-in-depth-repetition-definition-levels/>Columnar File Readers in Depth: Repetition & Definition Levels</a></h3><div class=post-meta><span class=post-author>Weston Pace</span>
<span class=post-date>June 2, 2025</span></div></article><article class=related-post><a href=/blog/columnar-file-readers-in-depth-column-shredding/><img src=/assets/blog/columnar-file-readers-in-depth-column-shredding/columnar-file-readers-in-depth-column-shredding.png alt="Columnar File Readers in Depth: Column Shredding" class=related-preview-image></a><h3><a href=/blog/columnar-file-readers-in-depth-column-shredding/>Columnar File Readers in Depth: Column Shredding</a></h3><div class=post-meta><span class=post-author>Weston Pace</span>
<span class=post-date>May 15, 2025</span></div></article><article class=related-post><a href=/blog/columnar-file-readers-in-depth-compression-transparency/><img src=/assets/blog/columnar-file-readers-in-depth-compression-transparency/columnar-file-readers-in-depth-compression-transparency.png alt="Columnar File Readers in Depth: Compression Transparency" class=related-preview-image></a><h3><a href=/blog/columnar-file-readers-in-depth-compression-transparency/>Columnar File Readers in Depth: Compression Transparency</a></h3><div class=post-meta><span class=post-author>Weston Pace</span>
<span class=post-date>April 29, 2025</span></div></article></div></div></main></div><footer class=site-footer><div class=footer-content><a href=/ class=site-title><img src=/assets/blog/logo.png alt="LanceDB Blog" class=site-logo></a><div class=footer-links><a href=https://lancedb.com/documentation class=footer-link>Documentation</a>
<a href=https://lancedb.com/pricing class=footer-link>Pricing</a>
<a href=/get-started class="footer-link get-started">Get Started</a></div></div></footer></body></html>