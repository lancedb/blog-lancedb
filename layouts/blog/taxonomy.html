{{ define "main" }}
    
    <main>
        <div class="category-header">
            <h1>{{ .Title }}</h1>
            {{ $currentCategory := .Title }}
            {{ range .Site.Params.categories }}
                {{ if eq .name $currentCategory }}
                    <p class="category-description">{{ .description }}</p>
                {{ end }}
            {{ end }}
            <div class="category-meta">
                <span class="post-count">{{ len .Pages }} posts</span>
            </div>
        </div>

        <div class="category-filters">
            <a href="/" class="filter-link{{ if not .IsHome }} inactive{{ end }}">All Posts</a>
            {{ range .Site.Params.categories }}
                <a href="/categories/{{ .slug }}/" class="filter-link{{ if eq $.Title .name }} active{{ end }}">{{ .name }}</a>
            {{ end }}
        </div>

        <div class="post-grid">
            {{ range .Pages }}
                <article class="post-card">
                    {{ with .Params.image }}
                        <a href="{{ $.RelPermalink }}">
                            <img src="{{ . }}" alt="{{ $.Title }}" class="preview-image">
                        </a>
                    {{ end }}
                    
                    <div class="post-content">
                        <h2>
                            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                        </h2>
                        
                        <div class="post-meta">
                            <div class="post-author">{{ .Params.author | default "LanceDB Team" }}</div>
                            <div class="post-date">{{ .Date.Format "Jan 2, 2006" }}</div>
                        </div>
                        
                        {{ with .Params.description }}
                            <p class="post-description">{{ . }}</p>
                        {{ end }}
                        
                        {{ if .Params.categories }}
                            <div class="post-categories">
                                {{ range .Params.categories }}
                                    <span class="category-tag">{{ . }}</span>
                                {{ end }}
                            </div>
                        {{ end }}
                    </div>
                </article>
            {{ end }}
        </div>

        {{ if eq (len .Pages) 0 }}
            <div class="empty-state">
                <h3>No posts found in this category</h3>
                <p>Check back later for new content!</p>
                <a href="/" class="back-link">‚Üê Back to all posts</a>
            </div>
        {{ end }}
    </main>

{{ end }}