{{ define "main" }}
    {{ $paginator := .Paginate .Pages }}
    <main>
        <section class="category-hero">
            <div class="container">
                <p class="category-hero__badge text-caption">
                    Blog category:
                </p>
                <h2 class="category-hero__title text-heading-large">
                    {{ .Title }}
                </h2>
            </div>
        </section>
        <div class="container">
            {{ partial "components/blog-categories.html" . }}
            <div class="post-grid">
                {{ range $paginator.Pages }}
                    <article class="post-card">
                        <a href="{{ .RelPermalink }}">
                            <img src="{{ .Params.image | default "/assets/blog/preview.png" }}" alt="{{ .Title }}" class="preview-image">
                        </a>
                        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
                        <div class="post-meta">
                            {{- range $index, $category := .Params.categories -}}
                                {{- if $index }} / {{ end -}}
                                {{- $category -}}
                            {{- end -}}
                            {{- if .Params.categories }} / {{ end -}}
                            {{- if .Params.author2 -}}
                                {{- .Params.author }} & {{ .Params.author2 -}}
                            {{- else -}}
                                {{- .Params.author -}}
                            {{ end }} / {{ .Date.Format "January 2, 2006" -}}
                        </div>
                        <p class="post-description">{{ .Description | default (truncate 100 .Summary) }}</p>
                    </article>
                {{ end }}
            </div>
    
            {{ if gt $paginator.TotalPages 1 }}
            <div class="pagination-subscribe-container">
                <nav class="pagination">
                    <div class="pagination-links">
                        {{ if $paginator.HasPrev }}
                            <a href="{{ $paginator.Prev.URL }}" class="pagination-link prev" rel="prev">
                                <span class="pagination-arrow">←</span>
                                <span class="pagination-text">Previous</span>
                            </a>
                        {{ end }}
                        
                        <!-- All page numbers -->
                        {{ range $paginator.Pagers }}
                            {{ if eq .PageNumber $paginator.PageNumber }}
                                <span class="pagination-link current">{{ .PageNumber }}</span>
                            {{ else }}
                                <a href="{{ .URL }}" class="pagination-link page-number">{{ .PageNumber }}</a>
                            {{ end }}
                        {{ end }}
                        
                        {{ if $paginator.HasNext }}
                            <a href="{{ $paginator.Next.URL }}" class="pagination-link next" rel="next">
                                <span class="pagination-text">Next</span>
                                <span class="pagination-arrow">→</span>
                            </a>
                        {{ end }}
                    </div>
                </nav>
            </div>
            {{ end }}
    
            {{ if eq (len .Pages) 0 }}
                <div class="empty-state">
                    <h3>No posts found in this category</h3>
                    <p>Check back later for new content!</p>
                    <a href="/" class="back-link">← Back to all posts</a>
                </div>
            {{ end }}
        </div>

    </main>

{{ end }}