<ul class="sidebar-list">
  {{- range .Pages.ByWeight }}
    <li>
      {{- if eq .Params.layout "divider" }}
        {{- if .Params.link }}
          <a href="{{ .Params.link }}" class="sidebar-divider">{{ .Params.sidebar_title | default .Title }}</a>
        {{- else }}
          <div class="sidebar-divider">{{ .Params.sidebar_title | default .Title }}</div>
        {{- end }}
      {{- else if and .Pages (not .Params.sidebar_collapsed) }}
        <details {{ if or (eq .RelPermalink $.current.RelPermalink) (in $.current.RelPermalink .RelPermalink) }}open{{ end }}>
          <summary>
            <a href="{{ .RelPermalink }}" class="sidebar-link{{ if eq .RelPermalink $.current.RelPermalink }} active{{ end }}">
              {{ .Params.sidebar_title | default .Title }}
            </a>
          </summary>
          {{ partial "docs-sidebar-recursive.html" (dict "Pages" .Pages "current" $.current) }}
        </details>
      {{- else if .Pages }}
        <!-- Section with children but collapsed - just show the link without expanding -->
        <a href="{{ .RelPermalink }}" class="sidebar-link{{ if eq .RelPermalink $.current.RelPermalink }} active{{ end }}">
          {{ .Params.sidebar_title | default .Title }}
        </a>
      {{- else }}
        <a href="{{ .RelPermalink }}" class="sidebar-link{{ if eq .RelPermalink $.current.RelPermalink }} active{{ end }}">
          {{ .Params.sidebar_title | default .Title }}
        </a>
      {{- end }}
    </li>
  {{- end }}
</ul> 