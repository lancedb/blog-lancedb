{{ $fonts := resources.Get "css/fonts.css" | resources.ExecuteAsTemplate "css/fonts.generated.css" . | minify | fingerprint }}
<link rel="stylesheet" href="{{ $fonts.RelPermalink }}" integrity="{{ $fonts.Data.Integrity }}" crossorigin="anonymous">

{{/* Preload critical fonts */}}
{{ $preloadFonts := slice "AeonikFono-Regular.woff2" "Aeonik-Pro-Regular.woff2" }}
{{ range $preloadFonts }}
  <link rel="preload" href="{{ "fonts/" | relURL }}{{ . }}" as="font" type="font/woff2" crossorigin="anonymous">
{{ end }}

{{ if .Params.enableSwiper }}
  {{ $swiper := resources.Get "css/vendors/swiper-bundle.min.css" | fingerprint }}
  <link rel="stylesheet" href="{{ $swiper.RelPermalink }}" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="{{ $swiper.RelPermalink }}"></noscript>
{{ end }}

{{ $custom := resources.Get "css/custom.css" }}
{{ $syntaxHighlighting := resources.Get "css/syntax-highlighting.css" }}
<link href="{{ $custom.RelPermalink }}" rel="stylesheet">
<link rel="stylesheet" href="{{ $syntaxHighlighting.RelPermalink }}" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="{{ $syntaxHighlighting.RelPermalink }}"></noscript>

{{ with resources.Get "scss/main.scss" }}
  {{ $opts := dict "transpiler" "libsass" "targetPath" "css/style.css" }}
  {{ with . | toCSS $opts }}
    {{ if eq hugo.Environment "development" }}
      <link rel="stylesheet" href="{{ .RelPermalink }}">
    {{ else }}
      {{ with . | minify | fingerprint }}
        <link rel="preload" href="{{ .RelPermalink }}" as="style">
        <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}

